@model IEnumerable<LibraryCoreApp.Models.Books>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_SiteLayout.cshtml";
}
<br />
<h4>Book list</h4>
<hr />
<br />

@*<link rel="stylesheet" , href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css" />*@
<link rel="stylesheet" , href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css" />
@if (ViewBag.message != "")
{
    <div class="form-group"><label class="small mb-1" style="color:red;">@ViewBag.message</label></div>
}
<table width="100%" class="table-sm table-hover table-bordered" id="example">
    <thead class="bg-danger text-light">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Title)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Category)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Author)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Copies)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Publication)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DateAdded)
            </th>
            <th>
                Actions
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th>
                BookTitle
            </th>
            <th>
                BookCategory
            </th>
            <th>
                BookAuthor
            </th>
            <th>
                BookCopies
            </th>
            <th>
                BookPublication
            </th>
            <th>
                DateAdded
            </th>
            @*<th>
                Action
                </th>*@
        </tr>
    </tbody>
</table>
<table width="100%" class="table-sm table-hover table-bordered" id="example1">
</table>
<br />
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>
@*<script>
    $(document).ready(function () {
    $('#example').DataTable({
    "ajax": {
    "url": "User/Books/GetAllBooks",
    "type": "get",
    "datatype": "json",
    },
    "columns": [
    { "data": "title" },
    { "data": "category" },
    { "data": "author" },
    { "data": "copies" },
    { "data": "publication" },
    { "data": "dateAdded" },
    { "data": "id", "render": function (id) { return " <a class='btn btn-sm btn-info text-light' data-toggle='tooltip' title='Request book' href='@Url.Action("Borrow","Books")?bookId=" + id + "'> <i class='fas fa-hand-point-up'></i> Request</a>";},
    "orderable": false,
    "width": "70px"
    }
    ],
    "language": {
    "emptyTable": "No data found, Add new items"
    }
    });
    });
</script>*@
<script>
        $(document).ready(function () {
            $('#example').DataTable( {
        ajax: {
            url: '/User/GetAllBooks',
            dataSrc: ''
        },
        columns: [
            { data: 'title' },
            { data: 'category' },
            { data: 'author' },
            { data: 'copies' },
            { data: 'publication' },
            { data: 'dateAdded' },
            { 'data': 'id', 'render': function (id) { return "<a class='btn btn-sm btn-info text-light' data-toggle='tooltip' title='Request book' href='@Url.Action("RequestBook","User")?BookId=" + id + "'> <i class='fas fa-hand-point-up'></i> Request</a>";},
                "orderable": false,
                "width": "70px"
            }
        ],
    'language': {
    'emptyTable': 'No data found, Add new items'
    }
    });
    });
</script>